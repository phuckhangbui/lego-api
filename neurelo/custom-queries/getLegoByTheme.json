{
  "name": "getLegoByTheme",
  "query": "SELECT\r\n    l.Id,\r\n    l.Name,\r\n    l.Price,\r\n    l.Image,\r\n    JSON_ARRAYAGG(\r\n        JSON_OBJECT(\r\n            'Id', t.Id,\r\n            'Name', t.Name\r\n        )\r\n    ) AS Theme\r\nFROM\r\n    Lego l\r\nJOIN LegoTheme lt ON\r\n    l.Id = lt.LegoId\r\nJOIN Theme t ON\r\n    t.Id = lt.ThemeId\r\nGROUP BY\r\n    l.Id,\r\n    l.Name,\r\n    l.Price,\r\n    l.Image\r\nHAVING JSON_CONTAINS(JSON_ARRAYAGG(t.Id), CAST({{Id}} AS JSON));\r\n",
  "parameters": [
    {
      "name": "Id",
      "type": "Int",
      "spread": false
    }
  ],
  "httpPath": "getLegoByTheme",
  "httpMethod": "POST",
  "apiMode": "REST",
  "gqlOperationType": "MUTATION"
}